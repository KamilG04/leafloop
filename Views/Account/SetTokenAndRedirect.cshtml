@{
    Layout = null;
    var token = TempData["JwtToken"] as string;
    var returnUrl = TempData["ReturnUrl"] as string ?? "/";
}
<!DOCTYPE html>
<html>
<head>
    <title>Logging in...</title>
</head>
<body>
<script>
    // Store token in localStorage
    try {
        localStorage.setItem('jwt_token', '@token');
        console.log('Token saved to localStorage');
    } catch (e) {
        console.error('Failed to save token to localStorage:', e);
    }

    // Redirect to the return URL
    window.location.href = '@returnUrl';
</script>

<!-- Fallback for browsers with JavaScript disabled -->
<noscript>
    <meta http-equiv="refresh" content="0;url=@returnUrl">
</noscript>
</body>
</html>